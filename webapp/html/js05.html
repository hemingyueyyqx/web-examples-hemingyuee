<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Thousands Separator</title>
</head>
<body>
    <label for="inputNumber">Input a number:</label>
    <input type="text" id="inputNumber" oninput="toThousands(this.value)">
    <br>
    <span id="formattedNumber"></span>
    <script src="https://cdn.bootcdn.net/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
    <script>
        // 整数千分位添加逗号
    function toThousands(num) {
        //判断输入的值是否为数字
            if(!isNaN(num)) {
                num = num.toString();
                //判断输入的值是否为小数
                if(num.includes('.')) {
                    num = num.split('.');
                    let numArray1 = num[0].split('');
            let numArray2 = num[1].split('');
            let result1 = '';
            let result2 = '';
            let count1 = 0;
            let count2 = 0;
            // 从数组尾部开始遍历
            for (let i = numArray1.length - 1; i >= 0; i--) {
                // 在每三位数字之后添加逗号
                result1 = numArray1[i] + result1;
                count1++;
                if (count1 % 3 === 0 && i !== 0) {
                    result1 = ',' + result1;
                }
            }
            for(let j = 0; j< numArray2.length; j++) {
                result2 = result2 + numArray2[j];
                count2++;
                if (count2 % 3 === 0 && j != numArray2.length - 1) {
                    result2 = result2 + ',';
                }
            }
            let result = `${result1}.${result2}` ;

            document.getElementById("formattedNumber").innerHTML = result; // 将结果显示在formattedNumber元素中
                }
            else{
                numArray = num.split('');
                let result0 = '';
                let count = 0;
                for (let i = numArray.length - 1; i >= 0; i--) {
                // 在每三位数字之后添加逗号
                result0 = numArray[i] + result0;
                count++;
                if (count % 3 === 0 && i !== 0) {
                    result0 = ',' + result0;
                }
            }
            document.getElementById("formattedNumber").innerHTML = result0;
            }
            
            }
            else{document.getElementById("formattedNumber").innerHTML = "请输入数字";}
        }
    
    /*$(document).ready(function () {
            $("#inputNumber").on("input", function () {
                let number = $(this).val();
                let formattedNumber = addCommas(number);
                $("#formattedNumber").text(formattedNumber);
            });
            
            function addCommas(number) {
                return number.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",");
            }
        });*/
    </script>   
</body>
</html>
